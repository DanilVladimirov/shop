<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <link rel="stylesheet" href="/static/css/style.css">
    {% block head %}
    {% endblock %}
</head>
<body>

<div class="topnav">
    <a class="active" href="{% url 'start_page' %}"><img src="/static/logo_shop.png"><span>shop</span></a>
    <div class="search-container">
        <form action="{% url "search_products_page" %}">
            <input id="id_search_query" type="text" placeholder="Search.." name="q">
            <button class="button_search" type="submit"><img class="search-img" src="/static/search.png"></button>
        </form>
        <button onclick="record()" class="button_voice"><img src="/static/mic.png"></button>
    </div>
</div>
{% block body %}

{% endblock %}
<div id="popup" class="popup">
    <a href="" class="popup_area"></a>
    <div class="popup_body">
        <div class="popup_content">
            <div class="popup_text">
                <img style="height: 50px;width: 50px;margin: auto" src="/static/mic.png">
                speak
            </div>
        </div>
    </div>
</div>
<script>
    function record() {
        location.href = '#popup';
        var recognition = new webkitSpeechRecognition();
        recognition.lang = "en-US";
        recognition.onresult = function (event) {
            document.getElementById('id_search_query').value = event.results[0][0].transcript;
            location.href = "{% url 'search_products_page' %}?q=" + event.results[0][0].transcript;
        }
        recognition.start();
    }
</script>
</body>
</html>
